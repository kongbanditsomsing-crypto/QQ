// npm i inquirer axios
import inquirer from "inquirer";
import axios from "axios";

async function mainMenu() {
  const answers = await inquirer.prompt([
    {
      type: "input",
      name: "name",
      message: "‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö:",
    },
    {
      type: "input",
      name: "message",
      message: "‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:",
    },
    {
      type: "number",
      name: "amount",
      message: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á:",
      default: 1,
    },
  ]);

  console.log("\nüìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
  console.log("‡∏ä‡∏∑‡πà‡∏≠:", answers.name);
  console.log("‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:", answers.message);
  console.log("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:", answers.amount);

  const { confirm } = await inquirer.prompt([
    {
      type: "confirm",
      name: "confirm",
      message: "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á?",
    },
  ]);

  if (!confirm) {
    console.log(" ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å");
    return;
  }

  for (let i = 1; i <= answers.amount; i++) {
    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏™‡πà‡∏á‡πÑ‡∏õ API ‡∏ó‡∏î‡∏•‡∏≠‡∏á / log
    console.log(`üì® [${i}] ‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á ${answers.name}: ${answers.message}`);

    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô API ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏£‡∏¥‡∏á ‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏™‡πà axios.post
    // await axios.post("https://your-api.com/send", {
    //   name: answers.name,
    //   message: answers.message,
    // });

    await delay(500); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 0.5 ‡∏ß‡∏¥
  }

  console.log(" ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô");
}

function delay(ms) {
  return new Promise((res) => setTimeout(res, ms));
}

mainMenu();